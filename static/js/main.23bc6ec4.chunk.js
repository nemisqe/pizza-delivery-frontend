(window["webpackJsonppizza-delivery-front"]=window["webpackJsonppizza-delivery-front"]||[]).push([[0],{100:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},151:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),i=a(29),l=a(14),s=a(15),u=a(17),m=a(16),d=a(18),p=a(13),E=a(10),g=function(e){return{type:"FETCH_USER_DATA_FAILURE",payload:e}},f=function(e){return function(t,a){return function(n){e.loginUser(t,a).then((function(e){404===e&&n(g(e)),n(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return{type:"POST_LOGIN_SUCCESS",payload:t}}(e.data[0].clientName,e.data[0].password,e.data[0].token))})).catch((function(e){n(g(e))}))}}},b=function(e){return function(t,a){return function(n){e.registerUser(t,a).then((function(e){409===e&&n({type:"409_STATUS_CODE",payload:e}),n({type:"USER_REGISTRATION_SUCCESS",payload:e})})).catch((function(e){n(g(e))}))}}},h=function(e){return function(t,a,n){return function(r){e.makeOrder(t,a,n).then((function(e){r(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return{type:"MAKE_ORDER_SUCCESS",payload:t}}(e))})).catch((function(e){return console.error(e)}))}}},y=function(e){return function(t){return function(a){a({type:"USER_HISTORY_REQUESTED"}),e.getUserOrderHistory(t).then((function(e){return a({type:"GET_USER_ORDER_HISTORY",payload:e})})).catch((function(e){return console.error(e)}))}}},v=(a(100),a(4)),O=a.n(v),N=function(e){var t=e.userLogout;return r.a.createElement("li",{className:"nav-item",onClick:function(){return t()},key:"logout-link"},r.a.createElement(p.b,{className:"nav-link",to:"/logout"},"Log out"))},_=function(){return window.localStorage.getItem("token")?r.a.createElement(i.a,{to:"/"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item",key:"registration-link"},r.a.createElement(p.b,{className:"nav-link",to:"/registration"},"Registration")),r.a.createElement("li",{className:"nav-item",key:"login-link"},r.a.createElement(p.b,{className:"nav-link",to:"/login"},"Login")))},S=function(){return window.localStorage.getItem("token")?r.a.createElement("li",{className:"nav-item ",key:"cart-link"},r.a.createElement(p.b,{className:"nav-link",to:"/history"},"History")):null},w=function(e){var t=e.clientName;return r.a.createElement("li",{className:"nav-item welcome-title",key:"cart-link"},r.a.createElement("span",{className:"badge badge-primary"},"Welcome back, ",t,"!"))},U=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={activeBurgerButton:!0},a.toggleBurgerButton=function(){a.setState({activeBurgerButton:!a.state.activeBurgerButton})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.checkAuth)()}},{key:"render",value:function(){console.log(localStorage);var e=this.props,t=e.isAuthenticated,a=e.userLogout,n=e.clientName;return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"app-header navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement(p.b,{className:"navbar-brand",to:"/"},"Pizza-Delivery"),t?r.a.createElement("span",{className:"welcome-title__mobile badge badge-primary"},"Welcome back, ",n,"!"):null,t?r.a.createElement(w,{clientName:n}):null,r.a.createElement("button",{onClick:this.toggleBurgerButton,className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"navbar-collapse ".concat(this.state.activeBurgerButton?"collapse":""),id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav header-navigation-links"},r.a.createElement("li",{className:"nav-item",key:"main-link"},r.a.createElement(p.b,{className:"nav-link",to:"/"},"Home")),t?r.a.createElement(S,null):null,t?r.a.createElement(N,{userLogout:a}):r.a.createElement(_,null)))))}}],[{key:"propTypes",get:function(){return{checkAuth:O.a.func.isRequired,userLogout:O.a.func.isRequired,isAuthenticated:O.a.bool,clientName:O.a.string}}}]),t}(n.Component),k={userLogout:function(){return{type:"USER_LOGOUT"}},checkAuth:function(){return{type:"CHECK_USER_FOR_AUTH"}}},R=Object(E.b)((function(e){var t=e.UserReducer;return{isAuthenticated:t.isAuthenticated,clientName:t.clientName}}),k)(U),j=(a(102),function(e){var t=e.pizza,a=e.onAddedToCart,n=t.pizza_name,c=t.cooking_time,o=t.pizza_pictures;return r.a.createElement("div",{className:"pizza-list-item"},r.a.createElement("div",{className:"pizza-cover"},r.a.createElement("img",{src:"http://localhost:3001/pizza-pictures/".concat(o),alt:"pizza-cover",width:"120",height:"120"})),r.a.createElement("div",{className:"pizza-details"},r.a.createElement("p",{className:"pizza-name"},n),r.a.createElement("div",{className:"pizza-cooking-time"},c," seconds"),r.a.createElement("button",{onClick:function(){a()},className:"btn btn-info add-to-cart"},"Add to cart")))}),A=(a(103),function(e){return function(){return function(t){t({type:"FETCH_MENU_REQUEST"}),e.getAllPizzas().then((function(e){return t({type:"FETCH_MENU_SUCCESS",payload:e})})).catch((function(e){return t(function(e){return{type:"FETCH_MENU_FAILURE",payload:e}}(e))}))}}}),C=function(e){return{type:"PIZZA_ADDED_TO_CART",payload:e}},z=function(e){return{type:"PIZZA_REMOVED_FROM_CART",payload:e}},T=function(e){return{type:"ALL_PIZZAS_REMOVED_FROM_CART",payload:e}},D=r.a.createContext(),M=D.Provider,x=D.Consumer,P=function(){return function(e){return function(t){return r.a.createElement(x,null,(function(a){return r.a.createElement(e,Object.assign({},t,{pizzaService:a}))}))}}},H=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}},I=(a(104),function(){return r.a.createElement("div",{className:"lds-css"},r.a.createElement("div",{className:"lds-rolling"},r.a.createElement("div",null)))}),F=(a(105),function(){return r.a.createElement("div",{className:"container centered"},r.a.createElement("span",{className:"error-text"},"Oops. Page not found :("))}),L=a(12),B=function(e){var t=e.pizzaMenu,a=e.onAddedToCart;return r.a.createElement("ul",{className:"pizza-list"},t.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(j,{onAddedToCart:function(){return a(e.id)},pizza:e}))})))},Y=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchMenu()}},{key:"render",value:function(){var e=this.props,t=e.pizzaMenu,a=e.loading,n=e.menuErrors,c=e.onAddedToCart;return a?r.a.createElement(I,null):0!==n.length?r.a.createElement(F,null):r.a.createElement(B,{pizzaMenu:t,onAddedToCart:c})}}],[{key:"propTypes",get:function(){return{pizzaMenu:O.a.array,loading:O.a.any,userError:O.a.array,onAddedToCart:O.a.func,fetchMenu:O.a.func,menuErrors:O.a.array}}}]),t}(n.Component),G=H(P(),Object(E.b)((function(e){var t=e.MenuReducer;return{pizzaMenu:t.pizzaMenu,loading:t.loading,menuErrors:t.menuErrors}}),(function(e,t){var a=t.pizzaService;return Object(L.b)({fetchMenu:A(a),onAddedToCart:C},e)})))(Y),Z=(a(106),a(22)),q=a.n(Z),K=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).renderRow=function(e,t){var n=e.id,c=e.name,o=e.count,i=e.totalCookingTime,l=a.props,s=l.onIncrease,u=l.onDecrease,m=l.onDelete;return r.a.createElement("tr",{key:n},r.a.createElement("td",null,t+1),r.a.createElement("td",null,c),r.a.createElement("td",null,o),r.a.createElement("td",null,i),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return m(n)},className:"btn btn-outline-danger btn-sm float-right"},r.a.createElement("i",{className:"fa fa-trash-o"})),r.a.createElement("button",{onClick:function(){return s(n)},className:"btn btn-outline-success btn-sm float-right"},r.a.createElement("i",{className:"fa fa-plus-circle"})),r.a.createElement("button",{onClick:function(){return u(n)},className:"btn btn-outline-warning btn-sm float-right"},r.a.createElement("i",{className:"fa fa-minus-circle"}))))},a.handleSubmit=function(e){e.preventDefault();var t=a.props,n=t.fetchMakeOrderData,r=t.clientName,c=t.orderTotal;if(0===c)return a.dialog.show({title:"Empty cart",body:"Your cart is empty. Please add some pizza",bsSize:"large",actions:[q.a.OKAction()]});a.dialog.show({title:"Success",body:"Your order is currently cooking",actions:[q.a.OKAction()]}),n(r,"currently cooking",c),setTimeout((function(){alert("Your order is ready!")}),1e3*c)},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;q.a.setOptions({defaultOkLabel:"Go to page"});var t=this.props.items;return r.a.createElement("div",{className:"shopping-cart-table"},r.a.createElement("h2",null,"Your Order"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Pizza"),r.a.createElement("th",null,"Count"),r.a.createElement("th",null,"Cooking time"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,t.map(this.renderRow))),r.a.createElement("div",{className:"total"},r.a.createElement("button",{className:"btn btn-primary btn-sm order-button",onClick:this.handleSubmit},"Make order"),r.a.createElement("span",{className:"total-cooking-time__title"},"Total waiting time: ",this.props.orderTotal," sec")),r.a.createElement(q.a,{ref:function(t){e.dialog=t}}))}}]),t}(n.Component),Q=H(P(),Object(E.b)((function(e){var t=e.CartReducer,a=t.cartItems,n=t.orderTotal;return{items:a,clientName:e.UserReducer.clientName,orderTotal:n,totalCookingTime:n}}),(function(e,t){var a=t.pizzaService;return Object(L.b)({fetchMakeOrderData:h(a),onIncrease:C,onDecrease:z,onDelete:T},e)})))(K),V=Object(E.b)((function(e){return{isAuthenticated:e.UserReducer.isAuthenticated}}))((function(e){return e.isAuthenticated?r.a.createElement("div",null,r.a.createElement("div",{className:"row justify-content-center alert-success alert"},"You are logged in. Add some pizza to your cart"),r.a.createElement(G,null),r.a.createElement(Q,null)):r.a.createElement(i.a,{to:"/login"})})),W=(a(125),function(e){var t=e.historyData,a=t.clientName,n=t.cooking_time,c=t.isReady;return r.a.createElement("div",null,r.a.createElement("span",{className:"badge badge-light item-title"},"Client: ",r.a.createElement("span",{className:"badge badge-success item-value"},"".concat(a," "))),r.a.createElement("span",{className:"badge badge-light item-title"},"Cooking time: ",r.a.createElement("span",{className:"badge badge-success item-value"},"".concat(n," "))),r.a.createElement("span",{className:"badge badge-light item-title"},"Order progress: ",r.a.createElement("span",{className:"badge badge-success item-value"},"".concat(c," "))))}),J=I,X=(a(126),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.fetchUserOrderHistory)(e.clientName)}},{key:"render",value:function(){var e=this.props,t=e.currentUserOrderHistory;return e.loading?r.a.createElement(J,null):0===t.length?r.a.createElement("div",{className:"container-fluid mt-1 pt-1 pt-md-0 mt-md-1"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3 diagonal "},r.a.createElement("div",{className:"card border-0 mt-md-5 pt-md-5 bg-transparent"},r.a.createElement("div",{className:"card-body bg-transparent text-center"},r.a.createElement("h4",{className:"card-title text-dark"},"Your history is empty"),r.a.createElement("p",{className:"card-text text-secondary"},"Order some pizza"),r.a.createElement("div",{className:"text-center"},r.a.createElement(p.b,{to:"/",className:"btn btn-danger text-white"},"Go to main page"))))),r.a.createElement("div",{className:"col-md-9  diagonal diagonal-image"}))):r.a.createElement("ul",{className:"list-group"},t.map((function(e){return r.a.createElement("li",{className:"list-group-item",key:e.orderId},r.a.createElement(W,{historyData:e}))})))}}],[{key:"propTypes",get:function(){return{fetchUserOrderHistory:O.a.func.isRequired,currentUserOrderHistory:O.a.array,loading:O.a.bool,clientName:O.a.string}}}]),t}(n.Component)),$=H(P(),Object(E.b)((function(e){var t=e.UserReducer,a=t.clientName,n=t.loading;return{clientName:a,currentUserOrderHistory:t.currentUserOrderHistory,loading:n}}),(function(e,t){var a=t.pizzaService;return Object(L.b)({fetchUserOrderHistory:y(a)},e)})))(X),ee=function(){return r.a.createElement($,null)},te=(a(127),a(73),a(128),function(e){var t=e.errorHeader,a=e.errorBody,n=e.hide;return r.a.createElement("div",{className:n},r.a.createElement("div",{className:"alert alert-danger",role:"alert"},r.a.createElement("p",{className:"alert-link"},t),a))}),ae=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={clientName:"",password:""},a.handleSubmit=function(e){if(e.preventDefault(),""===a.state.clientName||""===a.state.password)return e.preventDefault(),a.dialog.show({title:"Empty fields",body:"Enter nickname and password",bsSize:"large",actions:[q.a.OKAction()]});console.log(a.props.signinErrors),a.props.fetchUserData(a.state.clientName,a.state.password)},a.handlePassword=function(e){a.setState({password:e.target.value})},a.handleUsername=function(e){a.setState({clientName:e.target.value})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return window.localStorage.getItem("token")?r.a.createElement(i.a,{to:"/",exact:!0}):r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"reg-page__form login-page__desktop"},0!==this.props.signinErrors.length?r.a.createElement(te,{errorBody:"Incorrect username or password",errorHeader:"Error"}):null,r.a.createElement("h3",null,"Login below"),r.a.createElement("label",{className:"reg-page__label"},r.a.createElement("p",{className:"label-txt"},"ENTER YOUR NAME"),r.a.createElement("input",{type:"text",className:"input",onChange:function(t){return e.handleUsername(t)},value:this.state.clientName}),r.a.createElement("div",{className:"line-box"},r.a.createElement("div",{className:"line"}))),r.a.createElement("label",{className:"reg-page__label"},r.a.createElement("p",{className:"label-txt"},"ENTER YOUR PASSWORD"),r.a.createElement("input",{type:"password",className:"input",value:this.state.password,onChange:function(t){return e.handlePassword(t)}}),r.a.createElement("div",{className:"line-box"},r.a.createElement("div",{className:"line"}))),r.a.createElement("button",{className:"reg-page__button",onClick:this.handleSubmit},"submit"),r.a.createElement(q.a,{ref:function(t){e.dialog=t}})),r.a.createElement("form",{className:"login-page__mobile"},0!==this.props.signinErrors.length?r.a.createElement(te,{errorBody:"Incorrect username or password",errorHeader:"Error"}):null,r.a.createElement("h3",null,"Log in below"),r.a.createElement("div",{className:"form-group-row"},r.a.createElement("label",{htmlFor:"email_address",className:"col-md-4 col-form-label text-md-right"},"Username"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{type:"text",id:"email_address",className:"form-control",onChange:function(t){return e.handleUsername(t)},value:this.state.clientName,name:"email-address",required:!0}))),r.a.createElement("div",{className:"form-group-row"},r.a.createElement("label",{htmlFor:"password",className:"col-md-4 col-form-label text-md-right"},"Password"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{type:"password",id:"password",className:"form-control",onChange:function(t){return e.handlePassword(t)},value:this.state.password,name:"password",required:!0}))),r.a.createElement("button",{type:"button",onClick:this.handleSubmit,className:"btn submit-button__mobile btn-primary"},"Log in")))}}]),t}(n.Component),ne=H(P(),Object(E.b)((function(e){var t=e.UserReducer,a=t.signinErrors;return{clientName:t.clientName,signinErrors:a,isAuthenticated:t.isAuthenticated,loading:e.MenuReducer.loading}}),(function(e,t){var a=t.pizzaService;return Object(L.b)({fetchUserData:f(a)},e)})))(ae),re=(a(129),function(){return r.a.createElement("div",{className:"alert alert-success",role:"alert"},"Registration success! Now you can ",r.a.createElement(p.b,{to:"/login"},"LOGIN"))}),ce=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={clientName:"",password:""},a.handleSubmit=function(e){if(e.preventDefault(),""===a.state.clientName||""===a.state.password)return a.dialog.show({title:"Empty fields",body:"Enter nickname and password",bsSize:"large",actions:[q.a.OKAction()]});a.props.fetchRegistrationUserData(a.state.clientName,a.state.password)},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return this.props.isAuthenticated?r.a.createElement(i.a,{to:"/login"}):(console.log(this.props.signupErrors),r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"reg-page__form registration-page__desktop"},0!==this.props.signupErrors.length?r.a.createElement(te,{errorBody:"Username already exist",errorHeader:"Error"}):null,this.props.signUpSuccess?r.a.createElement(re,null):null,r.a.createElement("h3",null,"Registration below"),r.a.createElement("label",{className:"reg-page__label"},r.a.createElement("p",{className:"label-txt"},"ENTER YOUR NAME"),r.a.createElement("input",{type:"text",className:"input",onChange:function(t){return e.setState({clientName:t.target.value})}}),r.a.createElement("div",{className:"line-box"},r.a.createElement("div",{className:"line"}))),r.a.createElement("label",{className:"reg-page__label"},r.a.createElement("p",{className:"label-txt"},"ENTER YOUR PASSWORD"),r.a.createElement("input",{type:"password",onChange:function(t){return e.setState({password:t.target.value})},className:"input"}),r.a.createElement("div",{className:"line-box"},r.a.createElement("div",{className:"line"}))),r.a.createElement("button",{type:"submit",onClick:this.handleSubmit,className:"reg-page__button"},"submit"),r.a.createElement(q.a,{ref:function(t){e.dialog=t}})),r.a.createElement("form",{className:"registration-page__mobile"},r.a.createElement("h3",{className:"registration-page__mobile_title"},"Registration below"),0!==this.props.signupErrors.length?r.a.createElement(te,{errorBody:"Username already exist",errorHeader:"Error"}):null,this.props.signUpSuccess?r.a.createElement(re,null):null,r.a.createElement("div",{className:"form-group-row"},r.a.createElement("label",{htmlFor:"email_address",className:"col-md-4 col-form-label text-md-right"},"Username"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{type:"text",id:"email_address",className:"form-control",onChange:function(t){return e.setState({clientName:t.target.value})},value:this.state.clientName,name:"email-address",required:!0}))),r.a.createElement("div",{className:"form-group-row"},r.a.createElement("label",{htmlFor:"password",className:"col-md-4 col-form-label text-md-right"},"Password"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{type:"password",id:"password",className:"form-control",onChange:function(t){return e.setState({password:t.target.value})},value:this.state.password,name:"password",required:!0}))),r.a.createElement("button",{type:"button",onClick:this.handleSubmit,className:"btn submit-button__mobile btn-primary"},"Submit"))))}}]),t}(n.Component),oe=H(P(),Object(E.b)((function(e){var t=e.UserReducer;return{clientName:t.clientName,signupErrors:t.signupErrors,signUpSuccess:t.signUpSuccess}}),(function(e,t){var a=t.pizzaService;return Object(L.b)({fetchRegistrationUserData:b(a)},e)})))(ce),ie=(a(130),function(){return r.a.createElement("footer",{className:"page-footer font-small blue"},r.a.createElement("div",{className:"footer-copyright text-center py-3"},"\xa9 2019 @nemisqe:",r.a.createElement("br",null),r.a.createElement("a",{href:"https://github.com/nemisqe",className:"git-link"},"Github")))}),le=(a(131),Object(E.b)((function(e){return{isAuthenticated:e.UserReducer.isAuthenticated}}))((function(e){var t=e.isAuthenticated;return r.a.createElement(r.a.Fragment,null,r.a.createElement(R,null),r.a.createElement(i.b,{path:"/history",render:function(){return t?r.a.createElement(i.b,{path:"/history",component:ee}):r.a.createElement(i.a,{to:"/login"})}}),r.a.createElement("main",{role:"main",className:"container"},r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/",component:V,exact:!0}),r.a.createElement(i.b,{path:"/registration",exact:!0,component:oe}),r.a.createElement(i.b,{path:"/login",exact:!0,component:ne}),r.a.createElement(i.b,{path:"/logout",exact:!0,render:function(){return t?r.a.createElement(i.b,{path:"/",component:V,exact:!0}):r.a.createElement(i.a,{to:"/login"})}}))),r.a.createElement(ie,null))}))),se=a(33);function ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function me(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ue(a,!0).forEach((function(t){Object(se.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ue(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var de={pizzaMenu:[],loading:!0,menuErrors:[]},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MENU_REQUEST":return me({},e,{menuErrors:[],loading:!0,pizzaMenu:[]});case"FETCH_MENU_SUCCESS":return me({},e,{menuErrors:[],pizzaMenu:t.payload,loading:!1});case"FETCH_MENU_FAILURE":return me({},e,{pizzaMenu:[],loading:!1,menuErrors:t.payload});default:return e}},Ee=a(36);function ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function fe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ge(a,!0).forEach((function(t){Object(se.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ge(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var be={cartItems:[],currentOrder:[],orderTotal:0,pizzaMenu:[]},he=function(e,t,a){return-1===a?[].concat(Object(Ee.a)(e),[t]):0===t.count?[].concat(Object(Ee.a)(e.slice(0,a)),Object(Ee.a)(e.slice(a+1))):[].concat(Object(Ee.a)(e.slice(0,a)),[t],Object(Ee.a)(e.slice(a+1)))},ye=function(e,t,a){return t+a*e.cooking_time},ve=function(e,t,a){var n=e.cartItems,r=e.orderTotal,c=e.pizzaMenu.find((function(e){return e.id===t})),o=n.findIndex((function(e){return e.id===t})),i=n[o],l=Oe(c,i,a);return fe({},e,{cartItems:he(n,l,o),orderTotal:ye(c,r,a)})},Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,n=t.id,r=void 0===n?e.id:n,c=t.count,o=void 0===c?0:c,i=t.name,l=void 0===i?e.pizza_name:i,s=t.totalCookingTime,u=void 0===s?0:s;return{id:r,name:l,count:o+a,totalCookingTime:u+a*e.cooking_time}},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MENU_REQUEST":return fe({},e,{pizzaMenu:[]});case"FETCH_MENU_SUCCESS":return fe({},e,{pizzaMenu:t.payload});case"FETCH_MENU_FAILURE":return fe({},e,{pizzaMenu:[],loading:!1,menuErrors:t.payload});case"PIZZA_ADDED_TO_CART":return ve(e,t.payload,1);case"PIZZA_REMOVED_FROM_CART":return ve(e,t.payload,-1);case"ALL_PIZZAS_REMOVED_FROM_CART":var a=e.cartItems.find((function(e){return e.id===t.payload}));return ve(e,t.payload,-a.count);default:return e}};function _e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Se(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_e(a,!0).forEach((function(t){Object(se.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_e(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var we={clientName:"",isAuthenticated:!1,signinErrors:[],currentUserOrderHistory:[],signUpSuccess:!1,signupErrors:[],loading:!1},Ue=function(e){var t=window.localStorage.getItem("clientName");return window.localStorage.getItem("token")?Se({},e.userData,{clientName:t,isAuthenticated:!0,currentUserOrderHistory:[]}):e},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER_ORDER_HISTORY":return Se({},e,{currentUserOrderHistory:t.payload,isAuthenticated:!0,loading:!1});case"FETCH_USER_DATA_SUCCESS":return Se({},e,{userData:t.payload.data,loading:!1,isAuthenticated:!0,currentUserOrderHistory:[]});case"POST_LOGIN_SUCCESS":return localStorage.setItem("clientName",t.payload[0]),localStorage.setItem("token",t.payload[2]),Se({},e,{clientName:t.payload[0],loading:!1,signinErrors:[],isAuthenticated:!0,currentUserOrderHistory:[]});case"USER_LOGOUT":return window.localStorage.removeItem("clientName"),window.localStorage.removeItem("token"),Se({},e,{clientName:"",isAuthenticated:!1,signinErrors:[],signupErrors:[],currentUserOrderHistory:[]});case"CHECK_USER_FOR_AUTH":return Ue(e);case"USER_REGISTRATION_SUCCESS":return Se({},e,{clientName:t.payload[0],signUpSuccess:!0,isAuthenticated:!1,signupErrors:[]});case"LOGIN_DATA_REQUESTED":return Se({},e,{loading:!0,currentUserOrderHistory:[],isAuthenticated:!1});case"MAKE_ORDER_SUCCESS":return Se({},e,{currentOrder:t.payload});case"FETCH_USER_DATA_FAILURE":return Se({},e,{userData:[],loading:!1,signupErrors:t.payload,isAuthenticated:!1});case"USER_HISTORY_REQUESTED":return Se({},e,{loading:!0,currentUserOrderHistory:[]});case"USER_ALREADY_REGISTERED":return Se({},e,{signupErrors:t.payload,signUpSuccess:!1,isAuthenticated:!1,currentUserOrderHistory:[]});case"409_STATUS_CODE":return Se({},e,{signupErrors:t.payload,signUpSuccess:!1});default:return e}},Re=Object(L.c)({MenuReducer:pe,CartReducer:Ne,UserReducer:ke}),je=a(90),Ae=Object(L.d)(Re,Object(L.a)(je.a)),Ce=F,ze=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={hasError:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidCatch",value:function(e){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(Ce,null):this.props.children}}]),t}(n.Component),Te=a(26),De=a.n(Te),Me=a(34),xe=a(35),Pe=a.n(xe),He=new function e(){var t=this;Object(l.a)(this,e),this._basicUrl="http://localhost:3001/",this.getAllPizzas=Object(Me.a)(De.a.mark((function e(){return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe.a.get("".concat(t._basicUrl,"menu/")).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.loginUser=function(){var e=Object(Me.a)(De.a.mark((function e(a,n){return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe.a.post("".concat(t._basicUrl,"authentication/"),{clientName:a,password:n}).then((function(e){return e})).catch((function(e){return e.response.status}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.registerUser=function(){var e=Object(Me.a)(De.a.mark((function e(a,n){return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe.a.post("".concat(t._basicUrl,"clients/add/"),{clientName:a,password:n}).then((function(e){return e.data})).catch((function(e){console.error(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.makeOrder=function(){var e=Object(Me.a)(De.a.mark((function e(a,n,r){return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe.a.post("".concat(t._basicUrl,"menu/add/"),{clientName:a,isReady:n,cooking_time:r}).then((function(e){if(0!==e.data.cooking_time)return e.data})).catch((function(e){return console.error(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),this.getUserOrderHistory=function(){var e=Object(Me.a)(De.a.mark((function e(a){return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe.a.get("".concat(t._basicUrl,"history/").concat(a,"/")).then((function(e){return e.data})).catch((function(e){return console.error(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};o.a.render(r.a.createElement(E.a,{store:Ae},r.a.createElement(ze,null,r.a.createElement(M,{value:He},r.a.createElement(p.a,null,r.a.createElement(le,null))))),document.getElementById("root"))},73:function(e,t,a){},91:function(e,t,a){e.exports=a(151)}},[[91,1,2]]]);
//# sourceMappingURL=main.23bc6ec4.chunk.js.map